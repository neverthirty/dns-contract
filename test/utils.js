const COLLECTION_ADDRESS = '348bcf827469c5fc38541c77fdd91d4e347eac200f6f2d9fd62dc08885f0415f';
const OWNER_ADDRESS = '448bcf827469c5fc38541c77fdd91d4e347eac200f6f2d9fd62dc08885f0415f';
const USER_ADDRESS = '548bcf827469c5fc38541c77fdd91d4e347eac200f6f2d9fd62dc08885f0415f';
const MONTH = 2592000;
const YEAR = 31622400;
const AUCTION_START_DURATION = 604800;
const AUCTION_END_DURATION = 3600;
const AUCTION_PROLONGATION = 3600;
const AUCTION_START_TIME = 1659171600;

const DNS_NEXT_RESOLVER_PREFIX = 0xba93;

const FC_PACK_STRING = [
    'stdlib.fc',
    'test-pack-string.fc',
];

const FC_ROOT = [
    'stdlib.fc',
    'dns-utils.fc',
    'root-dns.fc'
];

const FC_COLLECTION = [
    'stdlib.fc',
    'params.fc',
    'op-codes.fc',
    'dns-utils.fc',
    'nft-collection.fc'
];

const FC_ITEM = [
    'stdlib.fc',
    'params.fc',
    'op-codes.fc',
    'dns-utils.fc',
    'nft-item.fc'
];

const TON = 1e9;

const makeStorageRoot = ({}) => {
    return [
        "uint256->cell", { // content
            '0x4C582BE10F03F0CE99B9C3E21CCA57167EABC1424D326334D25EE785576E20BF': [     // hash of slice("ton")
                "address", '0:' + COLLECTION_ADDRESS,
            ],
            '0x1CD30600A1D4152A6C3C1D2B85D81B6B4E579157596E0B9FC49EC2F08A3A4DFE': [     // hash of slice("vip")
                "address", '0:' + COLLECTION_ADDRESS,
            ]
        },
    ];
}

const makeStorageCollection = ({}) => {
    return [
        "Address", '0:' + OWNER_ADDRESS, // owner_address
        "cell", [ // content
            'uint8', 1,
            'string', 'https://ton.org/collection.json'
        ],
        "boc", "B5EE9C7241022E0100072A000114FF00F4A413F4BCF2C80B0102016202030202CC0405020120262702012006070201201E1F02014808090201201A1B03F7007434C0C05C6C2497C1383E903E900C7E800C5C75C87E800C7E800C3C02C9ECF8C094D671C1462C238CC426D7C2FE900C1C14C01B60101C20043232C15401F3C594017E808572DA84B2C7F2CFC89BACE51633C5C0644CB88072407EC0380A71C0245C254274C7D42AB8887C027E08C86F09300038C08C4374CFC9600A0B0C00113E910C1C2EBCB8536002FC5F056C22355242C705F2E19501FA40D4306D21D08B42E746F6E8F00882F082A3537FF0DBCE7EEC35D69EDC3A189EE6F17D82F353A553F9AA96CB0BE3CE89588307F4178BA544F4E20446F6D61696E86DF00882F0C9046F7A37AD0EA7CEE73355984FA5428982F8B37C8F7BCEC91F7AC71A7CD104588307F4178922D0F0080D0E013C343A3A3B8E1636363737375135C705F2E196102510241023F823F00CE30E0F04FE6EB31FB08E58343653DCA1820AFAF0805210A15270BC9836820AFAF08016A1923005E220C2FF8E2F77706D722A51454434708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00DE0D6D0EA14D1D926C21E282105FCC3D145220BAE30282101A0B9D515220BAE30221C00AE3023B2010111213003A68747470733A2F2F646E732E746F6E2E6F72672F69636F6E2E706E672300C682F06105D6CC76AF400325E94D588CE511BE5BFDBB73B437DC51ECA43917D7A43E3D588307F41770C8CB07F400C9821062D561A2F823A1820828DE80A90420C20A92307ADE81012C8100F058A87AA904A1F82301A0F0074466F00A10351034F823F00C00F0302680698064A98452A0BCF2E197820AFAF08052B0A15270BC9836820AFAF0801AA1933A0905E220C2FF8E2C70206D21105B708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00923036E27A23F823A1A120C2009313A0029130E24464F00A10451024F823F00C012A313B5383C705F2E191105A104910381027103655021400325B32353537375135C705F2E19A03D4304015045033F823F00C00845B3739395155C705F2E19B05D3FF20D74AC20009D0D30701C000F2E19CF404300998D43040188307F417983050078307F45B30E270C8CB07F400C91045034444F00C02FEC00B8EEF303A8050F833D0F4043052508307F40E6FA18ED7D30721C0008E932510BD107A09105810471046105D4313504D1C96303B5F036C61E201C0018E2D7053006D8100A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB009130E2925F0CE2E038F8235007A18209E14320141503F63603FA4021F001FA40D20031FA00820AFAF0801EA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C8500CCF16500ECF1671244C145449D0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00107A94102D3A5BE202E30F105616171801EEBC066E16B08E5C353535235076A1820AFAF080A120C2FF8E2B1377706D72708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00923032E221D0D749F823F006F007F82381012CA04660F00A103412F823F00CE05B32353582102FCB26A2BAE3025F04840FF2F019006A29F0018210D53276DB103A47046D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00000A10293335300010104510344033F00C00747082108B77173504C8CBFF5005CF161443308040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000093520C00496308103E88064E020C00596308101F48032E020C00696308101908028E020C007963081012C801EE020C00896308100C88014E020C009943080647AE0C00A93803275E07A7180201201C1D0071006AC0BC014060840EE6B2802A0060840EE6B2802A208418B558689400E860820A37A02A41083085A456F81444A84065A9D6A0192A41392820000D1C3232C07274200201202021002BD036465FFA802E78B2801E78B66667A00659FE4F6AA40201202223020120242500511C3232C1C8B3C5885BACE385C0B5D24875D2682040FDEEE4B3C5A5F20073C5B2407338A49B0878B2600021081BA50C1B5C0838343E903E8034CFCC200017321400F3C5807E80B2CFF26000513B513434FFFE900835D2708027DFC07E9035353D0134CFCC0415C415B80C1C1B5B5B5B490415C415A002012028290201202A2B0013BBB39F00B175F07F0098000DBA559F00B6C718000DB8FCFF00B5F0380201202C2D0013B64A5E016204EBE0FA1000C3B461843AE9240F152118001E5C08DE016206EBE0FA1A60E038001E5C339E8086007AE140F8001E5C33B84111C466105E033E04883DCB11FB64DDC4964AD1BA06B879240DC23572F37CC5CAAAB143A2FFFBC4180012660F003C003060FE81E60F00309814DDBD", // nft_item_code
    ];
}

const makeStorageItemNonInit = () => {
    return [
        "uint256", '38930916800118655128984401856443062677799436388671332167772672007419684920584', // index,
        "Address", '0:' + COLLECTION_ADDRESS, // collection_address
    ];
}

const CONTENT_EMPTY = [ // content
    'uint8', 0,
    'uint256->cell', { // content

    },
]

const CONTENT = [ // content
    'uint8', 0,
    'uint256->cell', { // content
        '0x82a3537ff0dbce7eec35d69edc3a189ee6f17d82f353a553f9aa96cb0be3ce89': [
            'cell', [
                'uint8', 0,
                'string', 'alice.ton'
            ]
        ],
        '0xc9046f7a37ad0ea7cee73355984fa5428982f8b37c8f7bcec91f7ac71a7cd104': [
            'cell', [
                'uint8', 0,
                'string', 'TON Domain'
            ]
        ],
        '0x6105d6cc76af400325e94d588ce511be5bfdbb73b437dc51eca43917d7a43e3d': [
            'cell', [
                'uint8', 0,
                'string', 'https://dns.ton.org/icon.png#alice',
            ]
        ]
    },
]

const makeStorageItem = ({auctionEndTime, lastFillUpTime}) => {
    return [
        "uint256", '38930916800118655128984401856443062677799436388671332167772672007419684920584', // index
        "Address", '0:' + COLLECTION_ADDRESS, // collection_address
        "uint2", '0', // owner_address - zero address
        'cell', CONTENT_EMPTY,
        'cell', [ // domain
            'string', 'alice',
        ],
        'uint1', 1, // auction maybe
        'cell', [ // auction
            'Address', '0:' + OWNER_ADDRESS, // max_bid_address
            'coins', 1000 * TON, // max_bid_amount
            'uint64', auctionEndTime || (AUCTION_START_TIME + AUCTION_START_DURATION) // auction_end_time
        ],
        'uint64', lastFillUpTime || AUCTION_START_TIME // last_fill_up_time
    ];
}

const makeStorageItemComplete = ({auctionEndTime, lastFillUpTime}) => {
    return [
        "uint256", '38930916800118655128984401856443062677799436388671332167772672007419684920584', // index,
        "Address", '0:' + COLLECTION_ADDRESS, // collection_address
        "Address", '0:' + OWNER_ADDRESS, // owner_address
        'cell', CONTENT_EMPTY,
        'cell', [ // domain
            'string', 'alice',
        ],
        'uint1', 0, // auction maybe
        'uint64', lastFillUpTime || AUCTION_START_TIME // last_fill_up_time
    ];
}

module.exports = {
    YEAR,
    COLLECTION_ADDRESS,
    OWNER_ADDRESS,
    USER_ADDRESS,
    FC_ROOT,
    FC_COLLECTION,
    FC_ITEM,
    FC_PACK_STRING,
    TON,
    DNS_NEXT_RESOLVER_PREFIX,
    MONTH,
    AUCTION_START_DURATION,
    AUCTION_END_DURATION,
    AUCTION_PROLONGATION,
    makeStorageRoot,
    makeStorageCollection,
    makeStorageItem,
    makeStorageItemNonInit,
    makeStorageItemComplete,
    AUCTION_START_TIME,
    CONTENT,
    CONTENT_EMPTY
};